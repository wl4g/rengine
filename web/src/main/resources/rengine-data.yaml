# Copyright (c) 2017 ~ 2025, the original author wangl.sir individual Inc,
# All rights reserved. Contact us <Wanglsir@gmail.com, 983708408@qq.com>
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

# #### Environment Database configuration. ####
#

spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driverClassName: com.mysql.cj.jdbc.Driver
    hikari:
      jdbcUrl: ${RENGINE_DB_URL:jdbc:mysql://localhost:3306/rengine?useunicode=true&serverTimezone=Asia/Shanghai&characterEncoding=utf-8&useSSL=false&allowMultiQueries=true&autoReconnect=true}
      username: ${RENGINE_DB_USER:rengine}
      password: ${RENGINE_DB_PASSWORD:rengine}
      connectionTimeout: 30000
      idleTimeout: 600000
      initializationFailTimeout: 1
      minimumIdle: 10
      maxLifetime: 1800000
      maximumPoolSize: 100
      validationTimeout: 5000
      leakDetectionThreshold: 0
  data:
    mongodb:
      #uri: mongodb://rengine:123456@localhost:27017/rengine
      uri: mongodb://localhost:27017/rengine
    ## see:com.wl4g.rengine.server.minio.MinioClientProperties
    minio:
      endpoint: http://localhost:9000
      accessKey: minioadmin
      secretKey: minioadmin
      region: us-east-1
      bucket: rengine
      httpClient:
        connectTimeout: 5s
        readTimeout: 5s
        writeTimeout: 5s
      userUpload:
        assumeAccessKey: rengine_assume
        assumeSecretKey: 12345678
        assumePolicyName: rengine_assume_policy
        #assumePolicyActions: {}
        ## Notice: Must not start with '/'
        libraryObjectPrefix: library
        testsetObjectPrefix: testset
        libraryExtensions: [".jar"]
        testsetExtensions: [".csv"]
        # TODO 根据 minio-js 的 pubObject() 不调用 listMultipart 方法为依据设置
        libraryPartSize: 5MB
        libraryFileLimitSize: 10MB
        testsetPartSize: 5MB
        testsetFileLimitSize: 10MB
        expiredDuration: 5M

